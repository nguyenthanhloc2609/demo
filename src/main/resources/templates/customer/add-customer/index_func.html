<script type="text/javascript" th:inline="javascript">
    $(function () {
        var elem = document.getElementById("cusMoney");

        elem.addEventListener("keydown", function (event) {
            var key = event.which;
            if (key != 8 && key < 48 || (key > 57 && key < 96) || key > 105) event.preventDefault();
        });

        elem.addEventListener("keyup", function (event) {
            var value = this.value.replace(/\./g, "");
            this.dataset.currentValue = parseInt(value);
            var caret = value.length - 1;

            while ((caret - 3) > -1) {
                caret -= 3;
                value = value.split('');
                value.splice(caret + 1, 0, ".");

                value = value.join('');
            }
            this.value = value;
        });

        $('#btnAddCus').click(function () {
            createCustomer();
        })

        function createCustomer() {
            var fullName = $('#cusName').val().trim();
            var name = $('#cusNick').val().trim();
            var phone = $('#cusPhone').val().trim();
            var address = $('#cusAddr').val().trim();
            var billing = $('#cusBilling').val().trim();
            var note = $('#cusNote').val().trim();
            var money = $('#cusMoney').val().trim();
            money = Number(money.replace('.', ''));

            let body = {
                fullName,
                name,
                billing,
                note,
                phone,
                address,
                money
            }
            postRequest({
                url: "/customers",
                data: body,
                success: (data) => {
                    // console.log(data);
                    Swal.fire({
                        title: 'Thêm mới khách hàng thành công',
                        icon: 'info',
                        confirmButtonText: 'OK',
                    }).then((result) => {
                        window.location = "/customer";
                    });
                },
                error: (e) => {
                    console.log(e);
                    var error = e['error'];
                    if (error != null) {
                        let content = JSON.parse(error);
                        $("#error-log").html(content['message'] + ".<br/>")
                    } else
                        $("#error-log").html("Lỗi hệ thống!<br/>")

                }
            })


        }
    });
</script>